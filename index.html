<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title>CO2 Clock</title>
    <meta name="description" content="CO2 Emission Clock">
    <meta name="author" content="Martin Pichler (mpichler.dev@gmail.com">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="css/main.css">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-140782012-1"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-140782012-1');
	</script>
</head>

<body onresize="resize()">



    <div class="container-fluid p-0">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand font-weight-bold text-light" href="http://co2clock.info">co2clock.info</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="navbarNavDropdown" class="navbar-collapse collapse">
                <ul class="navbar-nav mr-auto">
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link font-weight-bold text-light" href="https://www.ipcc.ch/sr15/">IPCC REPORT 2018</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link font-weight-bold text-light" href="https://www.mcc-berlin.net/en/research/co2-budget.html">CARBON CLOCK</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link font-weight-bold text-light" href="http://www.globalcarbonatlas.org/en/CO2-emissions">CO<sub>2</sub> DATA</a>
                    </li>
                </ul>
            </div>
        </nav>

        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <div class="justify-content-center text-center">

                    <div class="justify-content-center row text-center">
                        <h1 class="font-weight-bold">TIME TILL CO<sub>2</sub> BUDGET DEPLETED</h1>
                    </div>

                    <div class="row pt-5">
                        <div class="col-md countdown-item">
                            <h2>YEARS</h2>
                            <div id="cd-years">
                                00
                            </div>
                        </div>
                        <div class="col-md countdown-item">
                            <h2>MONTHS</h2>
                            <div id="cd-months">
                                00
                            </div>
                        </div>
                        <div class="col-md countdown-item">
                            <h2>DAYS</h2>
                            <div id="cd-days">
                                00
                            </div>
                        </div>
                        <div class="col-md countdown-item">
                            <h2>HOURS</h2>
                            <div id="cd-hours">
                                00
                            </div>
                        </div>
                        <div class="col-md countdown-item">
                            <h2>MINUTES</h2>
                            <div id="cd-minutes">
                                00
                            </div>
                        </div>
                        <div class="col-md countdown-item">
                            <h2>SECONDS</h2>
                            <div id="cd-seconds">
                                00
                            </div>
                        </div>
                    </div>

                    <div id="emissions-per-seconds-container" class="justify-content-center row text-center pt-5 pb-3">
                        <div class="col-md-12">
                            <h3 class="font-weight-bold">CO<sub>2</sub> EMISSIONS [tons/sec]</h3>
                        </div>
                        <div class="col-md-12">
                            <h3 class="font-weight-bold"><span id="emissions-per-seconds"></span></h3>
                        </div>
                    </div>

                    <div class="row circle mx-auto">
                        <img class="image-grey" src="img/tree.png" alt="tree">
                        <img id="tree-color" src="img/tree.png" alt="tree">
                    </div>

                    <div class="justify-content-center row text-center pt-3">
                        <div class="col-md-12">
                            <h3 class="font-weight-bold"><span id="percentage-left"></span>% OF CO<sub>2</sub> BUDGET LEFT [tons]</h3>
                        </div>
                        <div class="col-md-12">
                            <h3 class="font-weight-bold"><span id="budget-left"></span></h3>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div id="about" class="pt-5 pb-5">
            <div class="container">
                <h1 class="font-weight-bold">ABOUT</h1>
                <p>
                    The Intergovernmental Panel on Climate Change (IPCC) is the United Nations body for assessing the
                    science related to climate change. It provides regular assessments of the scientific basis of climate
                    change, its impacts and future risks, and options for adaptation and mitigation.
                </p>
                <p>
                    One of their recent assessments, the "Global Warming of 1.5 ºC" report, provides numbers defining the
                    worlds global CO<sub>2</sub> emission budget. This budget represents the amount of CO<sub>2</sub> the world is allowed to
                    produce, in order to limit the global temperature rise to 1.5 °C above pre-industrial levels. For a
                    two-thirds chance of limiting warming to 1.5°C this budget is 420 GtCO<sub>2</sub>. For an even chance of limiting
                    warming to 1.5 °C the available budget is around 580 GtCO<sub>2</sub>.
                </p>
                <p>
                    The budget is calculated for the start of 2018.
                </p>
				<p>
					The tons/sec are calculated from the anual CO<sub>2</sub> emissions of 2017.
				</p>
            </div>
        </div>

        <div id="consequences" class="pt-5 pb-5">
            <div class="container">
                <h1 class="font-weight-bold">WHAT IF WE MISS THE GOAL</h1>
                <p>
                    “One of the key messages that comes out very strongly from this report is that we are already seeing
                    the consequences of 1°C of global warming through more extreme weather, rising sea levels and
                    diminishing Arctic sea ice, among other changes,” said Panmao Zhai, Co-Chair of IPCC Working Group I.
                </p>
                <p>
                    The Paris Agreement aims to limit global warming to 2 °C, underneath are some examples that
                    can be avoided by limiting meeting the 1.5 °C limit in comparison to the 2 °C Paris Agreement limit.
                    <ul>
                        <li>By 2100, global sea level rise would be 10 cm lower with global warming of 1.5°C compared with 2°C.</li>
                        <li>The likelihood of an Arctic Ocean free of sea ice in summer would be once per century with global warming of 1.5°C, compared with at least once per decade with 2°C</li>
                        <li>Coral reefs would decline by 70-90 percent with global warming of 1.5°C, whereas virtually all (> 99 percent) would be lost with 2°C.</li>
                    </ul>
                </p>
                <p>
                    A full list of impacts when missing the 1.5 °C goal can be seen in a compressed form in the
                    <a href="https://www.ipcc.ch/2018/10/08/summary-for-policymakers-of-ipcc-special-report-on-global-warming-of-1-5c-approved-by-governments/">Summary for Policymakers</a>
                    of the ICPP 2018 report.
                </p>
            </div>
        </div>

        <div id="countries" class="pt-5 pb-5">
            <div class="container">
                <h1 class="font-weight-bold pb-3">EMISSION BUDGETS PER COUNTRIES</h1>
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">Country</th>
                        <th scope="col">Total Budget [tons]</th>
                        <th scope="col">% of World Budget</th>
                        <th scope="col">Budget Left [tons]</th>
                    </tr>
                    </thead>
                    <tbody id="country-table-body">
                    </tbody>
                </table>
            </div>
        </div>

        <div id="sources" class="pt-5 pb-5">
            <div class="container">
                <h1 class="font-weight-bold pb-3">SOURCES</h1>
                <a class="text-dark" href="https://www.ipcc.ch">IPCC</a>
                <br/>
                <a class="text-dark" href="https://www.mcc-berlin.net/en/research/co2-budget.html">MCC-Berling (Original Carbon Clock)</a>
                <br>
                <a class="text-dark" href="http://www.globalcarbonatlas.org/en/CO2-emissions">www.globalcarbonatlas.org</a>
				<br>
				<a class="text-dark" href="https://github.com/martinpichler/co2clock.info">Github Repository (includes preprocessing of raw data)</a>
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="js/moment.js"></script>
    <script src="js/emission_data.js"></script>

    <script>

        var cdYears = document.getElementById("cd-years");
        var cdMonths = document.getElementById("cd-months");
        var cdDays = document.getElementById("cd-days");
        var cdHours = document.getElementById("cd-hours");
        var cdMinutes = document.getElementById("cd-minutes");
        var cdSeconds = document.getElementById("cd-seconds");
        var spanPercentageLeft = document.getElementById("percentage-left");
        var spanBudgetLeft = document.getElementById("budget-left");
        var spanEmissionsPerSecond = document.getElementById("emissions-per-seconds");


        var start = moment("2018-01-01");
        var percentageBudgetLeft = 0;

        /*
        var clockList = document.getElementById("clocks");
        clockList.innerHTML = '';
       */

        function numberFormater(numberToFormat) {
            return numberToFormat.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')
        }


        function updateCountries(){

            var now = moment(new Date());
            var elapsed = moment.duration(now.diff(start)).asSeconds();

            $("#country-table-body").html("");

            for(var country in emissions){


                // calculate time left
                var countryBudgetTotal = Math.round(emissions[country]["emission_budget_15"]);
                var countryBudgetLeft =  Math.round(countryBudgetTotal - (elapsed * emissions[country]["emission_per_second"]));
                var countryPercentageBudgetLeft = Math.round((countryBudgetTotal/emissions["world"]["emission_budget_15"]) * 10000)/100;

                // create table row
                $("#country-table-body").append("<tr><td>"+country+"</td><td>"+numberFormater(countryBudgetTotal)+"</td><td>"+countryPercentageBudgetLeft+"%</td><td>"+numberFormater(countryBudgetLeft)+"</td></tr>");
            }

            setTimeout(updateCountries, 1000);
        }

        function updateCountdown(){
            var now = moment(new Date());
            var elapsed = moment.duration(now.diff(start)).asSeconds();

            // calculate global timer
            var worldBudgetTotal = emissions["world"]["emission_budget_15"];
            var worldBudgetLeft = worldBudgetTotal - (elapsed * emissions["world"]["emission_per_second"]);
            var totalSecondsLeft = worldBudgetLeft/emissions["world"]["emission_per_second"];
            percentageBudgetLeft = Math.round((worldBudgetLeft/worldBudgetTotal) * 10000)/100;


            var years = Math.floor(totalSecondsLeft / 31536000);
            totalSecondsLeft %= 31536000;
            var months = Math.floor(totalSecondsLeft / 2592000);
            totalSecondsLeft %= 2592000;
            var days = Math.floor(totalSecondsLeft / 86400);
            totalSecondsLeft %= 86400;
            var hours = Math.floor(totalSecondsLeft / 3600);
            totalSecondsLeft %= 3600;
            var minutes = Math.floor(totalSecondsLeft / 60);
            totalSecondsLeft = Math.floor(totalSecondsLeft % 60);

            // update html
            cdYears.innerHTML = ('0' + years).slice(-2);
            cdMonths.innerHTML = ('0' + months).slice(-2);
            cdDays.innerHTML = ('0' + days).slice(-2);
            cdHours.innerHTML = ('0' + hours).slice(-2);
            cdMinutes.innerHTML = ('0' + minutes).slice(-2);
            cdSeconds.innerHTML = ('0' + totalSecondsLeft).slice(-2);

            spanPercentageLeft.innerHTML = percentageBudgetLeft;
            spanBudgetLeft.innerHTML = numberFormater(Math.floor(worldBudgetLeft));
            spanEmissionsPerSecond.innerHTML = numberFormater(Math.round(emissions["world"]["emission_per_second"]));

            setTimeout(updateCountdown, 1000);
        }

        function resize(){
            treeColor = document.getElementById("tree-color");
            width = treeColor.offsetWidth;
            height = treeColor.offsetHeight;
            startY = height - (height * percentageBudgetLeft/100);
            treeColor.style.clip = "rect("+startY+"px, "+width+"px, "+height+"px, 0px)";
        }

        updateCountdown();
        resize();
        updateCountries();

    </script>
</body>
</html>
